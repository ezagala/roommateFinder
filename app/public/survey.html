<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Compatibility Survey</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.1/css/font-awesome.min.css">
</head>
<body>
    <div class="container ">
        <h2>Survey Questions</h2>
        <hr>
        <div class="container">
            <!-- Personal info fields -->
            <h3>Tell me about yourself</h3>
            <h4>Name</h4>
            <input type="text" id="name" class="form-control" required="">
            <h4>Add a link to a photo!</h4>
            <input type="text" id="photo" class="form-control" required="">
            <hr> 
            <!-- Question list -->
            <h3>One:</h3>
            <h4>I have a consideable history of sharing a home with others.</h4>
            <form>
                <div class="row align-items-start">
                    <div class="col-8 ">
                        <select class="custom-select" id="q1">
                            <option selected>Select an option</option>
                            <option value="1">One (Strongly disagree)</option>
                            <option value="2">Two</option>
                            <option value="3">Three</option>
                            <option value="4">Four</option>
                            <option value="5">Five (Strongly agree)</option>
                        </select>
                    </div>
                </div>
            </form>
            <br>
            <h3>Two:</h3>
            <h4>I'll probably hang with my old roommates sometime in the near future.</h4>
            <form>
                <div class="row align-items-start">
                    <div class="col-8 ">
                        <select class="custom-select" id="q2">
                            <option selected>Select an option</option>
                            <option value="1">One (Strongly disagree)</option>
                            <option value="2">Two</option>
                            <option value="3">Three</option>
                            <option value="4">Four</option>
                            <option value="5">Five (Strongly agree)</option>
                        </select>
                    </div>
                </div>
            </form>
            <br>
            <h3>Three:</h3>
            <h4>I consider myself a particularly clean person.</h4>
            <form>
                <div class="row align-items-start">
                    <div class="col-8 ">
                        <select class="custom-select" id="q3">
                            <option selected>Select an option</option>
                            <option value="1">One (Strongly disagree)</option>
                            <option value="2">Two</option>
                            <option value="3">Three</option>
                            <option value="4">Four</option>
                            <option value="5">Five (Strongly agree)</option>
                        </select>
                    </div>
                </div>
            </form>
            <br>
            <h3>Four:</h3>
            <h4>I try not to cringe when I look at my credit score.</h4>
            <form>
                <div class="row align-items-start">
                    <div class="col-8 ">
                        <select class="custom-select" id="q4">
                            <option selected>Select an option</option>
                            <option value="1">One (Strongly disagree)</option>
                            <option value="2">Two</option>
                            <option value="3">Three</option>
                            <option value="4">Four</option>
                            <option value="5">Five (Strongly agree)</option>
                        </select>
                    </div>
                </div>
            </form>
            <br>
            <h3>Five:</h3>
            <h4>I enjoyed cooking/sharing meals with my last roommates.</h4>
            <form>
                <div class="row align-items-start">
                    <div class="col-8 ">
                        <select class="custom-select" id="q5">
                            <option selected>Select an option</option>
                            <option value="1">One (Strongly disagree)</option>
                            <option value="2">Two</option>
                            <option value="3">Three</option>
                            <option value="4">Four</option>
                            <option value="5">Five (Strongly agree)</option>
                        </select>
                    </div>
                </div>
            </form>
            <br>
            <h3>Six:</h3>
            <h4>I'm home all. the. time.</h4>
            <form>
                <div class="row align-items-start">
                    <div class="col-8 ">
                        <select class="custom-select" id="q6">
                            <option selected>Select an option</option>
                            <option value="1">One (Strongly disagree)</option>
                            <option value="2">Two</option>
                            <option value="3">Three</option>
                            <option value="4">Four</option>
                            <option value="5">Five (Strongly agree)</option>
                        </select>
                    </div>
                </div>
            </form>
            <br>
            <h3>Seven:</h3>
            <h4>I work a normal 9-5 gig.</h4>
            <form>
                <div class="row align-items-start">
                    <div class="col-8 ">
                        <select class="custom-select" id="q7">
                            <option selected>Select an option</option>
                            <option value="1">One (Strongly disagree)</option>
                            <option value="2">Two</option>
                            <option value="3">Three</option>
                            <option value="4">Four</option>
                            <option value="5">Five (Strongly agree)</option>
                        </select>
                    </div>
                </div>
            </form>
            <br>
            <h3>Eight:</h3>
            <h4>I really enjoy hosting friends when the opportunity is right.</h4>
            <form>
                <div class="row align-items-start">
                    <div class="col-8 ">
                        <select class="custom-select" id="q8">
                            <option selected>Select an option</option>
                            <option value="1">One (Strongly disagree)</option>
                            <option value="2">Two</option>
                            <option value="3">Three</option>
                            <option value="4">Four</option>
                            <option value="5">Five (Strongly agree)</option>
                        </select>
                    </div>
                </div>
            </form>
            <br>
            <h3>Nine:</h3>
            <h4>I'll probably lose my $*#t if you wake me up early in the a.m.</h4>
            <form>
                <div class="row align-items-start">
                    <div class="col-8 ">
                        <select class="custom-select" id="q9">
                            <option selected>Select an option</option>
                            <option value="1">One (Strongly disagree)</option>
                            <option value="2">Two</option>
                            <option value="3">Three</option>
                            <option value="4">Four</option>
                            <option value="5">Five (Strongly agree)</option>
                        </select>
                    </div>
                </div>
            </form>
            <br>
            <h3>Ten:</h3>
            <h4>Cost is the primary reason why I'm looking for shared housing.</h4>
            <form>
                <div class="row align-items-start">
                    <div class="col-8 ">
                        <select class="custom-select" id="q10">
                            <option selected>Select an option</option>
                            <option value="1">One (Strongly disagree)</option>
                            <option value="2">Two</option>
                            <option value="3">Three</option>
                            <option value="4">Four</option>
                            <option value="5">Five (Strongly agree)</option>
                        </select>
                    </div>
                </div>
            </form>
            <br>
            <!-- Submit button -->
            <button id="submit" type="button" class="btn btn-primary btn-lg btn-block" data-toggle="modal" data-target="#resultModal">Submit!</button>
            <br>
            <!-- Modal -->
            <div class="modal fade" id="resultModal" tabindex="-1" role="dialog" aria-labelledby="resultModalLabel" aria-hidden="true">
                <div class="modal-dialog" role="document">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="resultModalLabel">You're going to get along great with...</h5>
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </div>
                        <div class="modal-body">
                            
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>      
    </div>
<!-- Bootstrap, jQuery and Popper cdn -->
<script src="https://code.jquery.com/jquery.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
<script>
    // jQuery to pull input from the page 
    $('#submit').on('click', event => {
        event.preventDefault(); 

        // Build new character profile
        const scores = []; 
        for (let i = 1; i < 11; i++) {
            scores.push(parseInt($('#q' + i).val()))
        }

        const profile = {
            name: $("#name").val().trim(), 
            photo: $("#photo").val().trim(),
        } 

        profile.scores = scores; 

        console.log(profile);   

        $.put("/api/roommates", profile).then(data => {
            console.log(data); 
            // Data will be the match, render it to the modal
            const match = JSON.parse(data)
            const name = `<h4>${match.name}</h4>`;
            const photo = `<img src="${match.photo}">`; 
            $(".modal-body").append(name); 
            $(".modal-body").append(photo); 
        })

    })
</script>
</body>
</html>